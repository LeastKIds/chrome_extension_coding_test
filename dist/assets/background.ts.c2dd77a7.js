chrome.runtime.onMessage.addListener(async(r,a)=>{if(r.type==="login"){const t=r.data.TOKEN;try{const e=await fetch("https://api.github.com/user",{headers:{Authorization:`Bearer ${t}`}});if(!e.ok){chrome.runtime.sendMessage({status:"false",data:{errorCode:"loginError"}});return}const s=await e.json();chrome.runtime.sendMessage({status:"true",data:{login:s.login}})}catch{chrome.runtime.sendMessage({status:"false",data:{errorCode:"networkError"}})}}});
