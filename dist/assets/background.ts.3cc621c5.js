chrome.runtime.onMessage.addListener(function(t,a,s){if(t.type==="login"){console.log("Login message received");const n=t.data.TOKEN;return fetch("https://api.github.com/user",{headers:{Authorization:`Bearer ${n}`}}).then(e=>e.json()).then(e=>{const o=e.login;chrome.storage.sync.set({USER:o},function(){console.log("saved user name"),s({status:!0})})}).catch(e=>{s({status:!1,data:{errMessage:e}})}),!0}});
